<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Automation Explorations</title>

<script src="site_libs/header-attrs-2.7/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Array Analysis</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Overview</a>
</li>
<li>
  <a href="Basic.html">Basic Image Properties</a>
</li>
<li>
  <a href="Geom.html">Geometric Image Properties</a>
</li>
<li>
  <a href="Auto.html">Automation Explorations</a>
</li>
<li>
  <a href="WarpWhole.html">Warp Explorations</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Automation Explorations</h1>

</div>


<p>In this section we explore attempting to find the sub arrays automatically and then the features within them (i.e. pad centres adjusted to peak points). So the main goal it to find the sub array locations and fine adjustments within them.</p>
<p>The ‘automation’ will be highly tuned to image 488 but the chosen processes will try to avoid over customisation (e.g. use gradient info rather than grey level thresholds etc.)</p>
<p>Look in the <a href="about.html">About</a> section for libraries and default parameters.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>geomfolderStub<span class="op">=</span><span class="st">&quot;procimage/&quot;</span> <span class="co"># enable detailed review in a image review tool</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>folderStub<span class="op">=</span><span class="st">&quot;procimage/auto_&quot;</span> <span class="co"># enable detailed review in a image review tool</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>scaleFac<span class="op">=</span><span class="dv">5</span> <span class="co"># how much the subAreas are zoomed </span></span></code></pre></div>
<div id="blob-detection-algorithms" class="section level2">
<h2>Blob detection algorithms</h2>
<p>Compare three approaches on im 448. Cyan circles are simply bigger fitted radii we could post correct. The out of count is just from assuming the number of pads in the sub array.</p>
<p><img src="procimage/auto_im647Patch%201%20DifAlgBlob.png" width="100%" style="display: block; margin: auto;" /> View full image <a href="procimage/auto_im647Patch%201%20DifAlgBlob.png">procimage/auto_im647Patch 1 DifAlgBlob.png</a></p>
</div>
<div id="blob-detection" class="section level2">
<h2>Blob detection</h2>
<p>Here we detect the blobs on the images themselves and overlay with the uniform grid. The blob detection does not assume grid patterns or pad sizes (only feature sizes of Gaussian sigma between 1 and 3 in original image space).</p>
<p>Here we are looking to see how the uniform grid and blobs from im488 overlay on im647.</p>
<p>The red circles are the perspective projected uniform grid.</p>
<p>Green outlines are from blob analysis on an inter cubic upscaled (x5) version of im488 (to get higher accuracy of positions and radius).</p>
<p>The cyan outlines are from blob analysis on an inter cubic upscaled (x5) version of im647 (to get higher accuracy of positions and radius). There will be less.</p>
<p>1093 features detected on im647 and 12246 features detected on im488.</p>
<div id="patch-1" class="section level3">
<h3>Patch 1</h3>
<p><img src="procimage/auto_im647Patch%201%20subAreaZoomPerspGrid.png" width="100%" style="display: block; margin: auto;" /> View full image <a href="procimage/auto_im647Patch%201%20subAreaZoomPerspGrid.png">procimage/auto_im647Patch 1 subAreaZoomPerspGrid.png</a></p>
<div id="zoom-of-top-left-of-patch." class="section level4">
<h4>Zoom of top left of patch.</h4>
<p>The 647 points look to be consistently down and right of 488.</p>
<p><img src="procimage/auto_im647Patch%201%20TLsubAreaZoomPerspGrid.png" width="100%" style="display: block; margin: auto;" /> View full image <a href="procimage/auto_im647Patch%201%20TLsubAreaZoomPerspGrid.png">procimage/auto_im647Patch 1 TLsubAreaZoomPerspGrid.png</a></p>
</div>
<div id="zoom-of-bottom-left-of-patch" class="section level4">
<h4>Zoom of bottom left of patch</h4>
<p>The 647 points look to be consistently up and right of 488.</p>
<p>These two zoom suggest a different zoom factor for 647.</p>
<p><img src="procimage/auto_im647Patch%201%20BLsubAreaZoomPerspGrid.png" width="100%" style="display: block; margin: auto;" /> View full image <a href="procimage/auto_im647Patch%201%20BLsubAreaZoomPerspGrid.png">procimage/auto_im647Patch 1 BLsubAreaZoomPerspGrid.png</a></p>
</div>
</div>
<div id="patch-2" class="section level3">
<h3>Patch 2</h3>
<p><img src="procimage/auto_im647Patch%202%20subAreaZoomPerspGrid.png" width="100%" style="display: block; margin: auto;" /> View full image <a href="procimage/auto_im647Patch%202%20subAreaZoomPerspGrid.png">procimage/auto_im647Patch 2 subAreaZoomPerspGrid.png</a></p>
<div id="zoom-of-top-left-of-patch.-1" class="section level4">
<h4>Zoom of top left of patch.</h4>
<p><img src="procimage/auto_im647Patch%202%20TLsubAreaZoomPerspGrid.png" width="100%" style="display: block; margin: auto;" /> View full image <a href="procimage/auto_im647Patch%202%20TLsubAreaZoomPerspGrid.png">procimage/auto_im647Patch 2 TLsubAreaZoomPerspGrid.png</a></p>
</div>
<div id="zoom-of-bottom-left-of-patch-1" class="section level4">
<h4>Zoom of bottom left of patch</h4>
<p><img src="procimage/auto_im647Patch%202%20BLsubAreaZoomPerspGrid.png" width="100%" style="display: block; margin: auto;" /> View full image <a href="procimage/auto_im647Patch%202%20BLsubAreaZoomPerspGrid.png">procimage/auto_im647Patch 2 BLsubAreaZoomPerspGrid.png</a></p>
<p><br><br></p>
</div>
</div>
<div id="patch-3" class="section level3">
<h3>Patch 3</h3>
<p><img src="procimage/auto_im647Patch%203%20subAreaZoomPerspGrid.png" width="100%" style="display: block; margin: auto;" /> View full image <a href="procimage/auto_im647Patch%203%20subAreaZoomPerspGrid.png">procimage/auto_im647Patch 3 subAreaZoomPerspGrid.png</a></p>
<div id="zoom-of-top-left-of-patch.-2" class="section level4">
<h4>Zoom of top left of patch.</h4>
<p><img src="procimage/auto_im647Patch%203%20TLsubAreaZoomPerspGrid.png" width="100%" style="display: block; margin: auto;" /> View full image <a href="procimage/auto_im647Patch%203%20TLsubAreaZoomPerspGrid.png">procimage/auto_im647Patch 3 TLsubAreaZoomPerspGrid.png</a></p>
</div>
<div id="zoom-of-bottom-left-of-patch-2" class="section level4">
<h4>Zoom of bottom left of patch</h4>
<p><img src="procimage/auto_im647Patch%203%20BLsubAreaZoomPerspGrid.png" width="100%" style="display: block; margin: auto;" /> View full image <a href="procimage/auto_im647Patch%203%20BLsubAreaZoomPerspGrid.png">procimage/auto_im647Patch 3 BLsubAreaZoomPerspGrid.png</a></p>
<p><br><br></p>
</div>
</div>
<div id="patch-4" class="section level3">
<h3>Patch 4</h3>
<p><img src="procimage/auto_im647Patch%204%20subAreaZoomPerspGrid.png" width="100%" style="display: block; margin: auto;" /> View full image <a href="procimage/auto_im647Patch%204%20subAreaZoomPerspGrid.png">procimage/auto_im647Patch 4 subAreaZoomPerspGrid.png</a></p>
<div id="zoom-of-top-left-of-patch.-3" class="section level4">
<h4>Zoom of top left of patch.</h4>
<p><img src="procimage/auto_im647Patch%204%20TLsubAreaZoomPerspGrid.png" width="100%" style="display: block; margin: auto;" /> View full image <a href="procimage/auto_im647Patch%204%20TLsubAreaZoomPerspGrid.png">procimage/auto_im647Patch 4 TLsubAreaZoomPerspGrid.png</a></p>
</div>
<div id="zoom-of-bottom-left-of-patch-3" class="section level4">
<h4>Zoom of bottom left of patch</h4>
<p><img src="procimage/auto_im647Patch%204%20BLsubAreaZoomPerspGrid.png" width="100%" style="display: block; margin: auto;" /> View full image <a href="procimage/auto_im647Patch%204%20BLsubAreaZoomPerspGrid.png">procimage/auto_im647Patch 4 BLsubAreaZoomPerspGrid.png</a></p>
</div>
</div>
<div id="script-timing" class="section level3">
<h3>Script timing</h3>
<p>Script execution timed for ball park purposes but it will include the report generation sections so will be an over estimate of how long it takes.</p>
<p>All the processing in this analysis including loading and saving images completed in 258.1054257 seconds.</p>
<p><strong>Machine spec:</strong> Processor Intel(R) Core(TM) i9-9900X CPU @ 3.50GHz, 3504 Mhz, 10 Core(s), 64 GB RAM</p>
</div>
</div>

<hr><footer><p style="text-align:right;font-size: 10px;"><strong>CONFIDENTIAL</strong>. For attention of intended parties only.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Standard Disclaimers Apply:</strong>&nbsp;&nbsp;All views are my own, use at your own risk.  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &copy;&nbsp;Copyright&nbsp;2021&nbsp;David&nbsp;Bramwell </p></footer>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
